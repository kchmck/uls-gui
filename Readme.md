# ULS Map GUI

This project provides a Google Maps interface to
[ULS](http://wireless.fcc.gov/uls/index.htm?job=about) radio license data, to make
exploring local signals a nicer experience.

![Screenshot with map](http://kchmck.github.io/screenshots/uls-gui/tidus.png)

## Features

- **License map**: licenses are marked on the map based on transmitting location
- **Color coded markers**: color intensity indicates estimated receive signal strength
  (based on a naive link budget taking into account transmit power and free space path
  loss)
- **Configurable base location**: drag and drop the pin to change receiving location
  (persisted in localStorage)
- **Basic annotations**: catalog licenses as "confirmed", "reviewing", or "ignored"
  (persisted in localStorage)
- **Listing**: list all currently visible licenses, sorted by received power
- **Filtering**: filter licenses by frequency range, received power, and annotations
- **Searching**: search licenses for a specific frequency

## Requirements

This project has been tested with Node 8, Firefox 54, and Chrome 59, but will ideally work
in other environments thanks to Babel transpilation. At a minimum, you'll need

- [**Node**](https://nodejs.org/): installable with `pacman -S nodejs` on Archlinux and
  `apt-get install nodejs` on Ubuntu.
- [**Yarn**](https://yarnpkg.com): a package manager for Node, installable with `pacman -S
  yarn` and [other methods](https://yarnpkg.com/en/docs/install)
- **Make**: installable with `pacman -S make`/`apt-get install make`
- **A web browser**: known to work with Firefox and Chrome
- **Google Maps API key**: can be
  [obtained](https://developers.google.com/maps/documentation/javascript/get-api-key) for
  free with a Google account. Make sure the key is accessible from the `localhost:9428/*`
  referrer in the [credentials] pane!
- **ULS sqlite database generated by [scrape-fcc]**:
  holds the radio licenses for your target area

## Building

Using yarn, first install dependencies:
```
yarn
```

Then, build the server and web bundle:
```
make MAPS_API_KEY=··· BROWSER=··· NODE_ENV=production
```
which uses the following environmental variables:

- **MAPS_API_KEY**: your Google Maps API key hash, as visible in the key [credentials]
  pane. This gets embedded into the web bundle that's served to your browser.
- **BROWSER**: your browser version(s), for example `BROWSER="firefox >= 54"` or
  `BROWSER="chrome >= 59"`. Defaults to `BROWSER="firefox >= 54, chrome >= 59"` to support
  both browsers.
- **NODE_ENV**: setting this to `production` enables minification and various
  optimizations.

This will create the minified server script in `./bin` and minified web assets in
`./static`.

## Running

After building, you can run the server with
```
node bin/server.js -d <SCRAPE_FCC_DB>
```
where `<SCRAPE_FCC_DB>` is the path to your [scrape-fcc] sqlite database. For example,
```
node bin/server.js -d records.db
```

With the server running, open [`localhost:9428`](http://localhost:9428) in a web browser.
If everything goes well, a populated map should load with the base location centered at
the median position of all known licenses.

[credentials]: https://console.developers.google.com/apis/credentials
[scrape-fcc]: https://github.com/kchmck/scrape-fcc
